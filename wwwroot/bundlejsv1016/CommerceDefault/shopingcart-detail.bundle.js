"use strict";function Quantity(){this.Extend=function(e,t,a,n){this.DownElement=e,this.UpElement=t,this.TargetElement=a,this.ValueChangeCallBack=n||function(){console.log("ValueChange don't have callback")},this.Process()},this.Process=function(){var t=this;this.UpElement.addEventListener("click",function(e){+t.TargetElement.value<+t.TargetElement.max&&(t.TargetElement.value=++t.TargetElement.value,t.ValueChangeCallBack&&t.ValueChangeCallBack())}),this.DownElement.addEventListener("click",function(e){+t.TargetElement.value>+t.TargetElement.min&&(t.TargetElement.value=--t.TargetElement.value,t.ValueChangeCallBack&&t.ValueChangeCallBack())}),this.TargetElement.addEventListener("keyup",function(e){+t.TargetElement.value>+t.TargetElement.max?t.TargetElement.value=+t.TargetElement.max:+t.TargetElement.value<+t.TargetElement.min&&(t.TargetElement.value=+t.TargetElement.min),t.ValueChangeCallBack&&t.ValueChangeCallBack()}),this.TargetElement.addEventListener("change",function(e){t.ValueChangeCallBack&&t.ValueChangeCallBack()})},this.Init=function(e,t){var a=e.querySelector("[data-minus]"),n=e.querySelector("[data-plus]"),l=e.querySelector("input[type='number']");this.Extend(a,n,l,t)}}var listQuantities,summaryElement,btnReloadShopingCartTable,btnRemoveRows,btnUpdateQuantity;function processListItemShopingCartTable(){listQuantities=document.querySelectorAll("._quantity");for(var e=0;e<listQuantities.length;e++){(new Quantity).Init(listQuantities[e],reloadCartMoney)}}function init(){summaryElement=document.querySelector("[data-summary]"),btnReloadShopingCartTable=document.querySelector("#frmLazyLoadShopingCartTable #btnReloadShopingCartTable"),btnUpdateQuantity=document.getElementById("btnUpdateQuantity")}function removeCartItemComplete(){btnReloadShopingCartTable.click()}function reloadCartMoney(){for(var e=document.querySelectorAll("[data-class-id]"),t=0,a=0;a<e.length;a++){var n=e[a].querySelector("._quantity"),l=+e[a].querySelector("[data-quantity]").value,r=getUnitPrice(JSON.parse(n.dataset.price),l);e[a].querySelector("[data-unit-price]").innerHTML=WNumbHelper.GetFrNumber(r);var i=r*l;t+=i,e[a].querySelector("[data-item-price]").innerHTML=WNumbHelper.GetFrNumber(i)}document.querySelector("[data-summary]").innerHTML=WNumbHelper.GetFrNumber(t),btnUpdateQuantity.click()}function getUnitPrice(e,t){for(var a=e[e.length-1].money,n=e.length-1;0<=n&&!(0!==e[n].quantity&&t>=e[n].quantity);n--)a=e[n].money;return a}document.addEventListener("DOMContentLoaded",function(){init(),btnReloadShopingCartTable.click()});