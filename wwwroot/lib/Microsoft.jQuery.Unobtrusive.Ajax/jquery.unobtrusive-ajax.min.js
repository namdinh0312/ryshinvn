"use strict";!function(d){var i="unobtrusiveAjaxClick",u="unobtrusiveAjaxClickTarget";function s(t,a){for(var e=window,r=(t||"").split(".");e&&r.length;)e=e[r.shift()];return"function"==typeof e?e:(a.push(t),Function.constructor.apply(null,a))}function c(t){return"GET"===t||"POST"===t}function o(u,t){var a,n,i,o;if(!(a=u.getAttribute("data-ajax-confirm"))||window.confirm(a)){n=d(u.getAttribute("data-ajax-loading")),o=parseInt(u.getAttribute("data-ajax-loading-duration"),10)||0,d.extend(t,{type:u.getAttribute("data-ajax-method")||void 0,url:u.getAttribute("data-ajax-url")||void 0,cache:"true"===(u.getAttribute("data-ajax-cache")||"").toLowerCase(),beforeSend:function(t){var a,e,r;return e=t,c(r=i)||e.setRequestHeader("X-HTTP-Method-Override",r),!1!==(a=s(u.getAttribute("data-ajax-begin"),["xhr"]).apply(u,arguments))&&n.show(o),a},complete:function(){n.hide(o),s(u.getAttribute("data-ajax-complete"),["xhr","status"]).apply(u,arguments)},success:function(t,a,e){var r,n,i;r=u,n=t,-1===(e.getResponseHeader("Content-Type")||"text/html").indexOf("application/x-javascript")&&(i=(r.getAttribute("data-ajax-mode")||"").toUpperCase(),d(r.getAttribute("data-ajax-update")).each(function(t,a){switch(i){case"BEFORE":d(a).prepend(n);break;case"AFTER":d(a).append(n);break;case"REPLACE-WITH":d(a).replaceWith(n);break;default:d(a).html(n)}})),s(u.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(u,arguments)},error:function(){s(u.getAttribute("data-ajax-failure"),["xhr","status","error"]).apply(u,arguments)}}),t.data.push({name:"X-Requested-With",value:"XMLHttpRequest"}),i=t.type.toUpperCase(),t.data instanceof FormData?(t.processData=!1,t.contentType=!1,t.data.append("X-Requested-With","XMLHttpRequest"),c(i)||(t.type="POST",t.data.append("X-HTTP-Method-Override",i))):(t.data.push({name:"X-Requested-With",value:"XMLHttpRequest"}),c(i)||(t.type="POST",t.data.push({name:"X-HTTP-Method-Override",value:i})));var e=d(u);if(e.is("form")&&"multipart/form-data"==e.attr("enctype")){var r=new FormData;d.each(t.data,function(t,a){r.append(a.name,a.value)}),d("input[type=file]",e).each(function(){var e=this;d.each(e.files,function(t,a){r.append(e.name,a)})}),d.extend(t,{processData:!1,contentType:!1,data:r})}d.ajax(t)}}d(document).on("click","a[data-ajax=true]",function(t){t.preventDefault(),o(this,{url:this.href,type:"GET",data:[]})}),d(document).on("click","form[data-ajax=true] input[type=image]",function(t){var a=t.target.name,e=d(t.target),r=d(e.parents("form")[0]),n=e.offset();r.data(i,[{name:a+".x",value:Math.round(t.pageX-n.left)},{name:a+".y",value:Math.round(t.pageY-n.top)}]),setTimeout(function(){r.removeData(i)},0)}),d(document).on("click","form[data-ajax=true] :submit",function(t){var a=t.currentTarget.name,e=d(t.target),r=d(e.parents("form")[0]);r.data(i,a?[{name:a,value:t.currentTarget.value}]:[]),r.data(u,e),setTimeout(function(){r.removeData(i),r.removeData(u)},0)}),d(document).on("submit","form[data-ajax=true]",function(t){var a,e=d(this).data(i)||[],r=d(this).data(u),n=r&&r.hasClass("cancel");(t.preventDefault(),n||(!(a=d(this).data("unobtrusiveValidation"))||!a.validate||a.validate()))&&(this.enctype&&"multipart/form-data"===this.enctype?new FormData(this):e.concat(d(this).serializeArray()),o(this,{url:this.action,type:this.method||"GET",data:e.concat(d(this).serializeArray())}))})}(jQuery);