/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/drift-zoom@1.4.0/es/ZoomPane.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,i){for(var t=0;t<i.length;t++){var s=i[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,i,t){return i&&_defineProperties(e.prototype,i),t&&_defineProperties(e,t),e}import throwIfMissing from"./util/throwIfMissing";import{addClasses,removeClasses}from"./util/dom";var divStyle=document.createElement("div").style,HAS_ANIMATION="undefined"!=typeof document&&("animation"in divStyle||"webkitAnimation"in divStyle),ZoomPane=function(){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this._completeShow=this._completeShow.bind(this),this._completeHide=this._completeHide.bind(this),this._handleLoad=this._handleLoad.bind(this),this.isShowing=!1;var t=i.container,s=void 0===t?null:t,n=i.zoomFactor,l=void 0===n?throwIfMissing():n,o=i.inline,a=void 0===o?throwIfMissing():o,h=i.namespace,d=void 0===h?null:h,r=i.showWhitespaceAtEdges,m=void 0===r?throwIfMissing():r,c=i.containInline,v=void 0===c?throwIfMissing():c,p=i.inlineOffsetX,f=void 0===p?0:p,g=i.inlineOffsetY,C=void 0===g?0:g,u=i.inlineContainer,_=void 0===u?document.body:u;this.settings={container:s,zoomFactor:l,inline:a,namespace:d,showWhitespaceAtEdges:m,containInline:v,inlineOffsetX:f,inlineOffsetY:C,inlineContainer:_},this.openClasses=this._buildClasses("open"),this.openingClasses=this._buildClasses("opening"),this.closingClasses=this._buildClasses("closing"),this.inlineClasses=this._buildClasses("inline"),this.loadingClasses=this._buildClasses("loading"),this._buildElement()}return _createClass(e,[{key:"_buildClasses",value:function(e){var i=["drift-".concat(e)],t=this.settings.namespace;return t&&i.push("".concat(t,"-").concat(e)),i}},{key:"_buildElement",value:function(){this.el=document.createElement("div"),addClasses(this.el,this._buildClasses("zoom-pane"));var e=document.createElement("div");addClasses(e,this._buildClasses("zoom-pane-loader")),this.el.appendChild(e),this.imgEl=document.createElement("img"),this.el.appendChild(this.imgEl)}},{key:"_setImageURL",value:function(e){this.imgEl.setAttribute("src",e)}},{key:"_setImageSize",value:function(e,i){this.imgEl.style.width="".concat(e*this.settings.zoomFactor,"px"),this.imgEl.style.height="".concat(i*this.settings.zoomFactor,"px")}},{key:"setPosition",value:function(e,i,t){var s=this.imgEl.offsetWidth,n=this.imgEl.offsetHeight,l=this.el.offsetWidth,o=this.el.offsetHeight,a=l/2-s*e,h=o/2-n*i,d=l-s,r=o-n,m=d>0,c=r>0,v=m?d/2:0,p=c?r/2:0,f=m?d/2:d,g=c?r/2:r;if(this.el.parentElement===this.settings.inlineContainer){var C=window.pageXOffset,u=window.pageYOffset,_=t.left+e*t.width-l/2+this.settings.inlineOffsetX+C,w=t.top+i*t.height-o/2+this.settings.inlineOffsetY+u;this.settings.containInline&&(_<t.left+C?_=t.left+C:_+l>t.left+t.width+C&&(_=t.left+t.width-l+C),w<t.top+u?w=t.top+u:w+o>t.top+t.height+u&&(w=t.top+t.height-o+u)),this.el.style.left="".concat(_,"px"),this.el.style.top="".concat(w,"px")}this.settings.showWhitespaceAtEdges||(a>v?a=v:a<f&&(a=f),h>p?h=p:h<g&&(h=g)),this.imgEl.style.transform="translate(".concat(a,"px, ").concat(h,"px)"),this.imgEl.style.webkitTransform="translate(".concat(a,"px, ").concat(h,"px)")}},{key:"_removeListenersAndResetClasses",value:function(){this.el.removeEventListener("animationend",this._completeShow,!1),this.el.removeEventListener("animationend",this._completeHide,!1),this.el.removeEventListener("webkitAnimationEnd",this._completeShow,!1),this.el.removeEventListener("webkitAnimationEnd",this._completeHide,!1),removeClasses(this.el,this.openClasses),removeClasses(this.el,this.closingClasses)}},{key:"show",value:function(e,i,t){this._removeListenersAndResetClasses(),this.isShowing=!0,addClasses(this.el,this.openClasses),this.imgEl.getAttribute("src")!=e&&(addClasses(this.el,this.loadingClasses),this.imgEl.addEventListener("load",this._handleLoad,!1),this._setImageURL(e)),this._setImageSize(i,t),this._isInline?this._showInline():this._showInContainer(),HAS_ANIMATION&&(this.el.addEventListener("animationend",this._completeShow,!1),this.el.addEventListener("webkitAnimationEnd",this._completeShow,!1),addClasses(this.el,this.openingClasses))}},{key:"_showInline",value:function(){this.settings.inlineContainer.appendChild(this.el),addClasses(this.el,this.inlineClasses)}},{key:"_showInContainer",value:function(){this.settings.container.appendChild(this.el)}},{key:"hide",value:function(){this._removeListenersAndResetClasses(),this.isShowing=!1,HAS_ANIMATION?(this.el.addEventListener("animationend",this._completeHide,!1),this.el.addEventListener("webkitAnimationEnd",this._completeHide,!1),addClasses(this.el,this.closingClasses)):(removeClasses(this.el,this.openClasses),removeClasses(this.el,this.inlineClasses))}},{key:"_completeShow",value:function(){this.el.removeEventListener("animationend",this._completeShow,!1),this.el.removeEventListener("webkitAnimationEnd",this._completeShow,!1),removeClasses(this.el,this.openingClasses)}},{key:"_completeHide",value:function(){this.el.removeEventListener("animationend",this._completeHide,!1),this.el.removeEventListener("webkitAnimationEnd",this._completeHide,!1),removeClasses(this.el,this.openClasses),removeClasses(this.el,this.closingClasses),removeClasses(this.el,this.inlineClasses),this.el.setAttribute("style",""),this.el.parentElement===this.settings.container?this.settings.container.removeChild(this.el):this.el.parentElement===this.settings.inlineContainer&&this.settings.inlineContainer.removeChild(this.el)}},{key:"_handleLoad",value:function(){this.imgEl.removeEventListener("load",this._handleLoad,!1),removeClasses(this.el,this.loadingClasses)}},{key:"_isInline",get:function(){var e=this.settings.inline;return!0===e||"number"==typeof e&&window.innerWidth<=e}}]),e}();export{ZoomPane as default};
//# sourceMappingURL=/sm/5f722f45f14c15834b7cfbbfdd944f61552ef09da39d971c15e36319c97635ab.map