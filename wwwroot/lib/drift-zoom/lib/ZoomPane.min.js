/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/drift-zoom@1.4.0/lib/ZoomPane.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _throwIfMissing=_interopRequireDefault(require("./util/throwIfMissing")),_dom=require("./util/dom");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}var divStyle=document.createElement("div").style,HAS_ANIMATION="undefined"!=typeof document&&("animation"in divStyle||"webkitAnimation"in divStyle),ZoomPane=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this._completeShow=this._completeShow.bind(this),this._completeHide=this._completeHide.bind(this),this._handleLoad=this._handleLoad.bind(this),this.isShowing=!1;var i=t.container,s=void 0===i?null:i,n=t.zoomFactor,l=void 0===n?(0,_throwIfMissing.default)():n,o=t.inline,a=void 0===o?(0,_throwIfMissing.default)():o,h=t.namespace,d=void 0===h?null:h,r=t.showWhitespaceAtEdges,m=void 0===r?(0,_throwIfMissing.default)():r,c=t.containInline,u=void 0===c?(0,_throwIfMissing.default)():c,_=t.inlineOffsetX,f=void 0===_?0:_,v=t.inlineOffsetY,p=void 0===v?0:v,g=t.inlineContainer,C=void 0===g?document.body:g;this.settings={container:s,zoomFactor:l,inline:a,namespace:d,showWhitespaceAtEdges:m,containInline:u,inlineOffsetX:f,inlineOffsetY:p,inlineContainer:C},this.openClasses=this._buildClasses("open"),this.openingClasses=this._buildClasses("opening"),this.closingClasses=this._buildClasses("closing"),this.inlineClasses=this._buildClasses("inline"),this.loadingClasses=this._buildClasses("loading"),this._buildElement()}return _createClass(e,[{key:"_buildClasses",value:function(e){var t=["drift-".concat(e)],i=this.settings.namespace;return i&&t.push("".concat(i,"-").concat(e)),t}},{key:"_buildElement",value:function(){this.el=document.createElement("div"),(0,_dom.addClasses)(this.el,this._buildClasses("zoom-pane"));var e=document.createElement("div");(0,_dom.addClasses)(e,this._buildClasses("zoom-pane-loader")),this.el.appendChild(e),this.imgEl=document.createElement("img"),this.el.appendChild(this.imgEl)}},{key:"_setImageURL",value:function(e){this.imgEl.setAttribute("src",e)}},{key:"_setImageSize",value:function(e,t){this.imgEl.style.width="".concat(e*this.settings.zoomFactor,"px"),this.imgEl.style.height="".concat(t*this.settings.zoomFactor,"px")}},{key:"setPosition",value:function(e,t,i){var s=this.imgEl.offsetWidth,n=this.imgEl.offsetHeight,l=this.el.offsetWidth,o=this.el.offsetHeight,a=l/2-s*e,h=o/2-n*t,d=l-s,r=o-n,m=d>0,c=r>0,u=m?d/2:0,_=c?r/2:0,f=m?d/2:d,v=c?r/2:r;if(this.el.parentElement===this.settings.inlineContainer){var p=window.pageXOffset,g=window.pageYOffset,C=i.left+e*i.width-l/2+this.settings.inlineOffsetX+p,w=i.top+t*i.height-o/2+this.settings.inlineOffsetY+g;this.settings.containInline&&(C<i.left+p?C=i.left+p:C+l>i.left+i.width+p&&(C=i.left+i.width-l+p),w<i.top+g?w=i.top+g:w+o>i.top+i.height+g&&(w=i.top+i.height-o+g)),this.el.style.left="".concat(C,"px"),this.el.style.top="".concat(w,"px")}this.settings.showWhitespaceAtEdges||(a>u?a=u:a<f&&(a=f),h>_?h=_:h<v&&(h=v)),this.imgEl.style.transform="translate(".concat(a,"px, ").concat(h,"px)"),this.imgEl.style.webkitTransform="translate(".concat(a,"px, ").concat(h,"px)")}},{key:"_removeListenersAndResetClasses",value:function(){this.el.removeEventListener("animationend",this._completeShow,!1),this.el.removeEventListener("animationend",this._completeHide,!1),this.el.removeEventListener("webkitAnimationEnd",this._completeShow,!1),this.el.removeEventListener("webkitAnimationEnd",this._completeHide,!1),(0,_dom.removeClasses)(this.el,this.openClasses),(0,_dom.removeClasses)(this.el,this.closingClasses)}},{key:"show",value:function(e,t,i){this._removeListenersAndResetClasses(),this.isShowing=!0,(0,_dom.addClasses)(this.el,this.openClasses),this.imgEl.getAttribute("src")!=e&&((0,_dom.addClasses)(this.el,this.loadingClasses),this.imgEl.addEventListener("load",this._handleLoad,!1),this._setImageURL(e)),this._setImageSize(t,i),this._isInline?this._showInline():this._showInContainer(),HAS_ANIMATION&&(this.el.addEventListener("animationend",this._completeShow,!1),this.el.addEventListener("webkitAnimationEnd",this._completeShow,!1),(0,_dom.addClasses)(this.el,this.openingClasses))}},{key:"_showInline",value:function(){this.settings.inlineContainer.appendChild(this.el),(0,_dom.addClasses)(this.el,this.inlineClasses)}},{key:"_showInContainer",value:function(){this.settings.container.appendChild(this.el)}},{key:"hide",value:function(){this._removeListenersAndResetClasses(),this.isShowing=!1,HAS_ANIMATION?(this.el.addEventListener("animationend",this._completeHide,!1),this.el.addEventListener("webkitAnimationEnd",this._completeHide,!1),(0,_dom.addClasses)(this.el,this.closingClasses)):((0,_dom.removeClasses)(this.el,this.openClasses),(0,_dom.removeClasses)(this.el,this.inlineClasses))}},{key:"_completeShow",value:function(){this.el.removeEventListener("animationend",this._completeShow,!1),this.el.removeEventListener("webkitAnimationEnd",this._completeShow,!1),(0,_dom.removeClasses)(this.el,this.openingClasses)}},{key:"_completeHide",value:function(){this.el.removeEventListener("animationend",this._completeHide,!1),this.el.removeEventListener("webkitAnimationEnd",this._completeHide,!1),(0,_dom.removeClasses)(this.el,this.openClasses),(0,_dom.removeClasses)(this.el,this.closingClasses),(0,_dom.removeClasses)(this.el,this.inlineClasses),this.el.setAttribute("style",""),this.el.parentElement===this.settings.container?this.settings.container.removeChild(this.el):this.el.parentElement===this.settings.inlineContainer&&this.settings.inlineContainer.removeChild(this.el)}},{key:"_handleLoad",value:function(){this.imgEl.removeEventListener("load",this._handleLoad,!1),(0,_dom.removeClasses)(this.el,this.loadingClasses)}},{key:"_isInline",get:function(){var e=this.settings.inline;return!0===e||"number"==typeof e&&window.innerWidth<=e}}]),e}();exports.default=ZoomPane;
//# sourceMappingURL=/sm/cc139a2c797d5bc2532b21fb58f418ccae04062f7fa4e1b41ad8b225d325e83b.map