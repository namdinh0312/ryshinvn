/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/drift-zoom@1.4.0/src/js/ZoomPane.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import throwIfMissing from"./util/throwIfMissing";import{addClasses,removeClasses}from"./util/dom";const divStyle=document.createElement("div").style,HAS_ANIMATION="undefined"!=typeof document&&("animation"in divStyle||"webkitAnimation"in divStyle);export default class ZoomPane{constructor(e={}){this._completeShow=this._completeShow.bind(this),this._completeHide=this._completeHide.bind(this),this._handleLoad=this._handleLoad.bind(this),this.isShowing=!1;const{container:s=null,zoomFactor:t=throwIfMissing(),inline:i=throwIfMissing(),namespace:n=null,showWhitespaceAtEdges:l=throwIfMissing(),containInline:h=throwIfMissing(),inlineOffsetX:o=0,inlineOffsetY:a=0,inlineContainer:d=document.body}=e;this.settings={container:s,zoomFactor:t,inline:i,namespace:n,showWhitespaceAtEdges:l,containInline:h,inlineOffsetX:o,inlineOffsetY:a,inlineContainer:d},this.openClasses=this._buildClasses("open"),this.openingClasses=this._buildClasses("opening"),this.closingClasses=this._buildClasses("closing"),this.inlineClasses=this._buildClasses("inline"),this.loadingClasses=this._buildClasses("loading"),this._buildElement()}_buildClasses(e){const s=[`drift-${e}`],t=this.settings.namespace;return t&&s.push(`${t}-${e}`),s}_buildElement(){this.el=document.createElement("div"),addClasses(this.el,this._buildClasses("zoom-pane"));const e=document.createElement("div");addClasses(e,this._buildClasses("zoom-pane-loader")),this.el.appendChild(e),this.imgEl=document.createElement("img"),this.el.appendChild(this.imgEl)}_setImageURL(e){this.imgEl.setAttribute("src",e)}_setImageSize(e,s){this.imgEl.style.width=`${e*this.settings.zoomFactor}px`,this.imgEl.style.height=`${s*this.settings.zoomFactor}px`}setPosition(e,s,t){const i=this.imgEl.offsetWidth,n=this.imgEl.offsetHeight,l=this.el.offsetWidth,h=this.el.offsetHeight;let o=l/2-i*e,a=h/2-n*s;const d=l-i,m=h-n,r=d>0,p=m>0,g=r?d/2:0,c=p?m/2:0,C=r?d/2:d,_=p?m/2:m;if(this.el.parentElement===this.settings.inlineContainer){const i=window.pageXOffset,n=window.pageYOffset;let o=t.left+e*t.width-l/2+this.settings.inlineOffsetX+i,a=t.top+s*t.height-h/2+this.settings.inlineOffsetY+n;this.settings.containInline&&(o<t.left+i?o=t.left+i:o+l>t.left+t.width+i&&(o=t.left+t.width-l+i),a<t.top+n?a=t.top+n:a+h>t.top+t.height+n&&(a=t.top+t.height-h+n)),this.el.style.left=`${o}px`,this.el.style.top=`${a}px`}this.settings.showWhitespaceAtEdges||(o>g?o=g:o<C&&(o=C),a>c?a=c:a<_&&(a=_)),this.imgEl.style.transform=`translate(${o}px, ${a}px)`,this.imgEl.style.webkitTransform=`translate(${o}px, ${a}px)`}get _isInline(){const e=this.settings.inline;return!0===e||"number"==typeof e&&window.innerWidth<=e}_removeListenersAndResetClasses(){this.el.removeEventListener("animationend",this._completeShow,!1),this.el.removeEventListener("animationend",this._completeHide,!1),this.el.removeEventListener("webkitAnimationEnd",this._completeShow,!1),this.el.removeEventListener("webkitAnimationEnd",this._completeHide,!1),removeClasses(this.el,this.openClasses),removeClasses(this.el,this.closingClasses)}show(e,s,t){this._removeListenersAndResetClasses(),this.isShowing=!0,addClasses(this.el,this.openClasses),this.imgEl.getAttribute("src")!=e&&(addClasses(this.el,this.loadingClasses),this.imgEl.addEventListener("load",this._handleLoad,!1),this._setImageURL(e)),this._setImageSize(s,t),this._isInline?this._showInline():this._showInContainer(),HAS_ANIMATION&&(this.el.addEventListener("animationend",this._completeShow,!1),this.el.addEventListener("webkitAnimationEnd",this._completeShow,!1),addClasses(this.el,this.openingClasses))}_showInline(){this.settings.inlineContainer.appendChild(this.el),addClasses(this.el,this.inlineClasses)}_showInContainer(){this.settings.container.appendChild(this.el)}hide(){this._removeListenersAndResetClasses(),this.isShowing=!1,HAS_ANIMATION?(this.el.addEventListener("animationend",this._completeHide,!1),this.el.addEventListener("webkitAnimationEnd",this._completeHide,!1),addClasses(this.el,this.closingClasses)):(removeClasses(this.el,this.openClasses),removeClasses(this.el,this.inlineClasses))}_completeShow(){this.el.removeEventListener("animationend",this._completeShow,!1),this.el.removeEventListener("webkitAnimationEnd",this._completeShow,!1),removeClasses(this.el,this.openingClasses)}_completeHide(){this.el.removeEventListener("animationend",this._completeHide,!1),this.el.removeEventListener("webkitAnimationEnd",this._completeHide,!1),removeClasses(this.el,this.openClasses),removeClasses(this.el,this.closingClasses),removeClasses(this.el,this.inlineClasses),this.el.setAttribute("style",""),this.el.parentElement===this.settings.container?this.settings.container.removeChild(this.el):this.el.parentElement===this.settings.inlineContainer&&this.settings.inlineContainer.removeChild(this.el)}_handleLoad(){this.imgEl.removeEventListener("load",this._handleLoad,!1),removeClasses(this.el,this.loadingClasses)}}
//# sourceMappingURL=/sm/3a7e2fa8ffe885be1db1e73f6765e74819a1fa68edd97490c8dde53274833aad.map